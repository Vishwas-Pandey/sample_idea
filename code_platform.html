<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Collaborative Code Editor: Interactive Project Plan</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap"
      rel="stylesheet"
    />
    <style>
      body {
        font-family: "Inter", sans-serif;
        background-color: #f8f7f4;
        color: #44403c;
      }
      .phase-button {
        transition: all 0.2s ease-in-out;
      }
      .phase-button.active {
        background-color: #0ea5e9;
        color: white;
        transform: translateX(10px);
        box-shadow: 0 4px 6px -1px rgb(0 0 0 / 0.1),
          0 2px 4px -2px rgb(0 0 0 / 0.1);
      }
      .task-card-enter,
      .gemini-idea-enter {
        animation: fadeIn 0.5s ease-out forwards;
        opacity: 0;
      }
      @keyframes fadeIn {
        from {
          opacity: 0;
          transform: translateY(10px);
        }
        to {
          opacity: 1;
          transform: translateY(0);
        }
      }
      .chart-container {
        position: relative;
        width: 100%;
        max-width: 800px;
        margin-left: auto;
        margin-right: auto;
        height: 40vh;
        max-height: 400px;
      }
      .tech-pill {
        display: inline-block;
        padding: 0.25rem 0.75rem;
        border-radius: 9999px;
        font-size: 0.75rem;
        font-weight: 500;
        margin: 0.25rem;
      }
      .bg-fe {
        background-color: #dbeafe;
        color: #1e40af;
      }
      .bg-be {
        background-color: #dcfce7;
        color: #166534;
      }
      .bg-devops {
        background-color: #e5e5e5;
        color: #404040;
      }
      .spinner {
        width: 24px;
        height: 24px;
        border: 3px solid rgba(0, 0, 0, 0.1);
        border-left-color: #0ea5e9;
        border-radius: 50%;
        display: inline-block;
        animation: spin 1s linear infinite;
      }
      @keyframes spin {
        to {
          transform: rotate(360deg);
        }
      }
      .task-checkbox-item {
        display: flex;
        align-items: center;
        cursor: pointer;
      }
      .task-checkbox-item input[type="checkbox"] {
        appearance: none;
        width: 1.25rem;
        height: 1.25rem;
        border: 2px solid #a8a29e;
        border-radius: 0.25rem;
        margin-right: 0.75rem;
        cursor: pointer;
        position: relative;
        transition: background-color 0.2s, border-color 0.2s;
        flex-shrink: 0;
      }
      .task-checkbox-item input[type="checkbox"]:checked {
        background-color: #0ea5e9;
        border-color: #0ea5e9;
      }
      .task-checkbox-item input[type="checkbox"]:checked::after {
        content: "✔";
        color: white;
        font-size: 0.8rem;
        position: absolute;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
      }
      .task-checkbox-item label.completed {
        text-decoration: line-through;
        color: #78716c;
      }
    </style>
  </head>
  <body class="antialiased">
    <div class="container mx-auto p-4 sm:p-6 lg:p-8">
      <header class="text-center mb-10">
        <a
          href="index.html"
          class="text-indigo-600 hover:text-indigo-800 mb-4 inline-block"
          >&larr; Back to Project Hub</a
        >
        <h1 class="text-4xl md:text-5xl font-bold text-stone-800">
          Collaborative Coding Platform
        </h1>
        <p class="mt-2 text-lg text-stone-600 max-w-3xl mx-auto">
          A real-time code editor project plan, focusing on system design and
          live collaboration features.
        </p>
      </header>
      <div
        id="stats-grid"
        class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-12 text-center"
      >
        <div class="bg-white p-6 rounded-xl shadow-sm border border-stone-200">
          <h3 class="text-3xl font-bold text-sky-600">8</h3>
          <p class="text-stone-500">Week Timeline</p>
        </div>
        <div class="bg-white p-6 rounded-xl shadow-sm border border-stone-200">
          <h3 class="text-3xl font-bold text-sky-600">6</h3>
          <p class="text-stone-500">Development Phases</p>
        </div>
        <div class="bg-white p-6 rounded-xl shadow-sm border border-stone-200">
          <h3 class="text-3xl font-bold text-sky-600">3</h3>
          <p class="text-stone-500">Tech Pillars</p>
        </div>
        <div class="bg-white p-6 rounded-xl shadow-sm border border-stone-200">
          <h3 class="text-3xl font-bold text-sky-600">1</h3>
          <p class="text-stone-500">Real-time App</p>
        </div>
      </div>
      <main class="grid grid-cols-1 lg:grid-cols-12 gap-8">
        <aside class="lg:col-span-3">
          <div
            class="bg-white p-6 rounded-xl shadow-sm border border-stone-200 sticky top-8"
          >
            <h2 class="text-xl font-bold mb-4 text-stone-700">
              Project Phases
            </h2>
            <p class="text-sm text-stone-500 mb-6">
              Select a phase below to dive into its goals, timeline, and
              specific tasks.
            </p>
            <nav id="phase-navigation" class="space-y-2"></nav>
          </div>
        </aside>
        <div class="lg:col-span-9 space-y-8">
          <section
            id="details-pane"
            class="bg-white p-6 sm:p-8 rounded-xl shadow-sm border border-stone-200 min-h-[400px]"
          >
            <div id="phase-header" class="mb-6 pb-4 border-b border-stone-200">
              <h2
                id="phase-title"
                class="text-2xl md:text-3xl font-bold text-stone-800"
              ></h2>
              <p id="phase-goal" class="mt-1 text-stone-600"></p>
            </div>
            <div id="task-list" class="space-y-4"></div>
            <div class="mt-6 pt-6 border-t border-stone-200">
              <button
                id="gemini-button"
                class="flex items-center justify-center w-full px-4 py-3 font-semibold text-white bg-gradient-to-r from-sky-500 to-indigo-500 rounded-lg shadow-md hover:from-sky-600 hover:to-indigo-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 transition-transform transform hover:scale-105 disabled:opacity-50 disabled:cursor-not-allowed"
              >
                ✨ Generate Task Ideas
              </button>
              <div id="gemini-loading" class="text-center mt-4 hidden">
                <div
                  class="flex items-center justify-center space-x-2 text-stone-500"
                >
                  <div class="spinner"></div>
                  <span>Generating ideas with Gemini...</span>
                </div>
              </div>
              <div id="gemini-results" class="mt-4 space-y-3"></div>
            </div>
          </section>

          <section
            id="progress-tracker-pane"
            class="bg-white p-6 sm:p-8 rounded-xl shadow-sm border border-stone-200"
          >
            <h2 class="text-2xl font-bold text-stone-800 mb-4">
              Phase Progress Tracker
            </h2>
            <p class="text-stone-600 mb-6">
              Check off the tasks as you complete them for the selected phase.
            </p>
            <div id="progress-list" class="space-y-3"></div>
          </section>

          <section
            class="bg-white p-6 sm:p-8 rounded-xl shadow-sm border border-stone-200"
          >
            <h2 class="text-2xl font-bold text-stone-800 mb-2">
              Workload Distribution
            </h2>
            <p class="text-stone-600 max-w-3xl mb-6">
              This chart visualizes the distribution of work across the
              different technology pillars throughout the project's timeline.
            </p>
            <div class="chart-container">
              <canvas id="workloadChart"></canvas>
            </div>
          </section>
        </div>
      </main>
    </div>
    <script>
      const projectPlan = {
        projectData: [
          {
            phase: "Phase 1: Foundation & Editor Setup",
            week: "Week 1",
            goal: "Set up the core application structure and integrate a client-side code editor.",
            tasks: [
              {
                category: "Backend",
                task: "Initialize Node.js project with Express and Socket.IO.",
              },
              {
                category: "Backend",
                task: "Set up basic Socket.IO connection listener.",
              },
              {
                category: "Frontend",
                task: "Initialize React project and install CodeMirror/Monaco Editor library.",
              },
              {
                category: "Frontend",
                task: "Embed the code editor into a React component.",
              },
            ],
          },
          {
            phase: "Phase 2: Real-time Sync Core Logic",
            week: "Weeks 2-3",
            goal: "Implement the real-time synchronization of code between multiple clients.",
            tasks: [
              {
                category: "Backend",
                task: "Create a 'room' concept in Socket.IO for session management.",
              },
              {
                category: "Backend",
                task: "Implement logic to broadcast code changes to all clients in a room.",
              },
              {
                category: "Frontend",
                task: "Emit an event to the server whenever the editor content changes.",
              },
              {
                category: "Frontend",
                task: "Listen for incoming code change events and update the editor content.",
              },
            ],
          },
          {
            phase: "Phase 3: Multi-user & Room Management",
            week: "Weeks 4-5",
            goal: "Develop features for users to create, join, and see other participants in coding sessions.",
            tasks: [
              {
                category: "Backend",
                task: "Develop API endpoints for creating and joining rooms (e.g., using unique IDs).",
              },
              {
                category: "Backend",
                task: "Manage user presence, broadcasting when users join or leave a room.",
              },
              {
                category: "Frontend",
                task: "Build a UI for creating or entering a room ID.",
              },
              {
                category: "Frontend",
                task: "Display a list of currently connected users/avatars in the session.",
              },
              {
                category: "DevOps",
                task: "Set up a PostgreSQL/MongoDB database to persist room information.",
              },
            ],
          },
          {
            phase: "Phase 4: Advanced Editor Features",
            week: "Week 6",
            goal: "Enhance the editor with features like language selection and code execution.",
            tasks: [
              {
                category: "Frontend",
                task: "Add a dropdown to select the coding language (e.g., JavaScript, Python).",
              },
              {
                category: "Frontend",
                task: "Implement syntax highlighting changes based on language selection.",
              },
              {
                category: "Backend",
                task: "Integrate with a code execution API (e.g., Judge0, JDoodle).",
              },
              {
                category: "Backend",
                task: "Create a secure endpoint to proxy code execution requests.",
              },
            ],
          },
          {
            phase: "Phase 5: UI/UX & Refinement",
            week: "Week 7",
            goal: "Polish the user interface and improve the overall collaborative experience.",
            tasks: [
              {
                category: "Frontend",
                task: "Design and implement a clean, intuitive layout for the editor and user list.",
              },
              {
                category: "Frontend",
                task: "Add a 'Copy Share Link' button for easy invitations.",
              },
              {
                category: "Frontend",
                task: "Implement different editor themes (e.g., light/dark mode).",
              },
            ],
          },
          {
            phase: "Phase 6: Deployment & Testing",
            week: "Week 8",
            goal: "Containerize, test, and deploy the application.",
            tasks: [
              {
                category: "DevOps",
                task: "Create Dockerfiles for the frontend and backend services.",
              },
              {
                category: "DevOps",
                task: "Configure Nginx as a reverse proxy for WebSocket connections.",
              },
              {
                category: "DevOps",
                task: "Deploy the application to a cloud provider.",
              },
              {
                category: "Backend",
                task: "Conduct basic load testing on Socket.IO connections.",
              },
            ],
          },
        ],
        geminiMockResponses: {
          0: [
            "Design the database schema for user accounts and sessions.",
            "Set up a linter and formatter for consistent code style.",
            "Choose a UI component library for React.",
          ],
          1: [
            "Research conflict resolution strategies for real-time editing.",
            "Implement cursor position sharing.",
            "Add debouncing to the editor's change event.",
          ],
          2: [
            "Implement user authentication to protect rooms.",
            "Add a feature to make rooms public or private.",
            "Persist chat messages for each room.",
          ],
          3: [
            "Cache results from the code execution API.",
            "Add a loading indicator while code is executing.",
            "Display stdout, stderr, and execution time in the UI.",
          ],
          4: [
            "Conduct user testing to gather feedback.",
            "Add responsive design for tablets.",
            "Create a settings modal for editor preferences.",
          ],
          5: [
            "Implement end-to-end tests for the collaboration flow.",
            "Set up automated build and deployment pipelines.",
            "Configure SSL/TLS for secure communication.",
          ],
        },
        workloadData: {
          labels: [
            "Week 1",
            "Week 2",
            "Week 3",
            "Week 4",
            "Week 5",
            "Week 6",
            "Week 7",
            "Week 8",
          ],
          datasets: [
            {
              label: "Frontend",
              data: [2, 2, 0, 2, 2, 2, 3, 0],
              backgroundColor: "#38bdf8",
            },
            {
              label: "Backend",
              data: [2, 2, 0, 2, 0, 2, 0, 1],
              backgroundColor: "#4ade80",
            },
            {
              label: "DevOps",
              data: [0, 0, 0, 0, 1, 0, 0, 3],
              backgroundColor: "#a3a3a3",
            },
          ],
        },
      };
      let activePhaseIndex = 0;
      const phaseNavigation = document.getElementById("phase-navigation");
      const phaseTitle = document.getElementById("phase-title");
      const phaseGoal = document.getElementById("phase-goal");
      const taskList = document.getElementById("task-list");
      const geminiButton = document.getElementById("gemini-button");
      const geminiLoading = document.getElementById("gemini-loading");
      const geminiResults = document.getElementById("gemini-results");
      const progressList = document.getElementById("progress-list");

      async function callGeminiApi(phaseIndex) {
        geminiButton.disabled = true;
        geminiLoading.classList.remove("hidden");
        geminiResults.innerHTML = "";
        return new Promise((resolve) =>
          setTimeout(
            () => resolve(projectPlan.geminiMockResponses[phaseIndex] || []),
            1500
          )
        );
      }

      async function handleGeminiClick() {
        const ideas = await callGeminiApi(activePhaseIndex);
        geminiLoading.classList.add("hidden");
        geminiButton.disabled = false;
        geminiResults.innerHTML = `<h4 class="font-bold text-stone-700 mb-2">✨ AI-Generated Suggestions</h4>`;
        ideas.forEach((idea, i) => {
          const ideaElement = document.createElement("div");
          ideaElement.className =
            "gemini-idea-enter p-3 bg-indigo-50 rounded-lg border border-indigo-200 text-indigo-800 text-sm";
          ideaElement.style.animationDelay = `${i * 100}ms`;
          ideaElement.textContent = `💡 ${idea}`;
          geminiResults.appendChild(ideaElement);
        });
      }

      function renderPhaseDetails(index) {
        const phase = projectPlan.projectData[index];
        phaseTitle.textContent = `${phase.phase} (${phase.week})`;
        phaseGoal.textContent = phase.goal;
        taskList.innerHTML = "";
        phase.tasks.forEach((task, i) => {
          const pillClass =
            task.category === "Frontend"
              ? "bg-fe"
              : task.category === "Backend"
              ? "bg-be"
              : "bg-devops";
          const taskEl = document.createElement("div");
          taskEl.className =
            "task-card-enter flex items-start space-x-4 p-4 bg-stone-50 rounded-lg border border-stone-200";
          taskEl.style.animationDelay = `${i * 50}ms`;
          taskEl.innerHTML = `<div><span class="tech-pill ${pillClass}">${task.category}</span></div><p class="flex-1 text-stone-700">${task.task}</p>`;
          taskList.appendChild(taskEl);
        });
        geminiResults.innerHTML = "";
        geminiLoading.classList.add("hidden");
        geminiButton.disabled = false;
      }

      function renderProgressTracker(index) {
        const phase = projectPlan.projectData[index];
        progressList.innerHTML = "";
        if (phase.tasks.length === 0) {
          progressList.innerHTML =
            '<p class="text-stone-500">No tasks in this phase to track.</p>';
          return;
        }
        phase.tasks.forEach((task, i) => {
          const listItem = document.createElement("div");
          listItem.className =
            "task-checkbox-item p-3 bg-stone-50 rounded-lg border border-stone-200 hover:bg-stone-100";
          const checkbox = document.createElement("input");
          checkbox.type = "checkbox";
          checkbox.id = `task-${index}-${i}`;
          const label = document.createElement("label");
          label.htmlFor = `task-${index}-${i}`;
          label.textContent = task.task;
          label.className = "flex-1 text-stone-700 pl-2";
          listItem.appendChild(checkbox);
          listItem.appendChild(label);
          checkbox.addEventListener("change", () => {
            label.classList.toggle("completed");
          });
          progressList.appendChild(listItem);
        });
      }

      function updateActiveButton(index) {
        phaseNavigation
          .querySelectorAll(".phase-button")
          .forEach((button, i) =>
            button.classList.toggle("active", i === index)
          );
      }

      function handlePhaseClick(index) {
        activePhaseIndex = index;
        renderPhaseDetails(activePhaseIndex);
        renderProgressTracker(activePhaseIndex);
        updateActiveButton(activePhaseIndex);
      }

      function initializeNavigation() {
        projectPlan.projectData.forEach((phase, index) => {
          const button = document.createElement("button");
          button.className =
            "phase-button w-full text-left p-3 rounded-lg hover:bg-sky-100 focus:outline-none focus:ring-2 focus:ring-sky-500";
          button.innerHTML = `<span class="font-semibold text-stone-700">${
            phase.phase.split(":")[0]
          }</span><span class="block text-sm text-stone-500">${
            phase.week
          }</span>`;
          button.addEventListener("click", () => handlePhaseClick(index));
          phaseNavigation.appendChild(button);
        });
      }

      function initializeChart() {
        const ctx = document.getElementById("workloadChart").getContext("2d");
        new Chart(ctx, {
          type: "bar",
          data: projectPlan.workloadData,
          options: {
            responsive: true,
            maintainAspectRatio: false,
            plugins: {
              title: { display: false },
              tooltip: { mode: "index", intersect: false },
            },
            scales: {
              x: { stacked: true, grid: { display: false } },
              y: {
                stacked: true,
                title: { display: true, text: "Number of Core Tasks" },
              },
            },
          },
        });
      }

      document.addEventListener("DOMContentLoaded", () => {
        initializeNavigation();
        geminiButton.addEventListener("click", handleGeminiClick);
        handlePhaseClick(0);
        initializeChart();
      });
    </script>
  </body>
</html>
